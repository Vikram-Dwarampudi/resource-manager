<div class="dashboard-header">
  <span class="dashboard-title">Resource Manager</span>
  <mat-form-field appearance="outline" class="dashboard-search">
    <mat-label>Search servers, pods...</mat-label>
    <input matInput type="text">
  </mat-form-field>
</div>

<div class="dashboard-summary">
  <mat-card class="summary-card">
    <div class="summary-title">Total Servers</div>
    <div class="summary-value">{{ servers.length }}</div>
    <div class="summary-desc">online</div>
  </mat-card>
  <mat-card class="summary-card">
    <div class="summary-title">Total Pods</div>
    <div class="summary-value">{{ totalPods }}</div>
    <div class="summary-desc">Currently running</div>
  </mat-card>
  <mat-card class="summary-card">
    <div class="summary-title">Allocated CPU</div>
    <div class="summary-value">-</div>
    <div class="summary-desc">Cores available</div>
  </mat-card>
  <mat-card class="summary-card">
    <div class="summary-title">Allocated Memory</div>
    <div class="summary-value">-</div>
    <div class="summary-desc">GB available</div>
  </mat-card>
</div>

<div class="main-content">
  <mat-card class="server-card">
    <div class="server-header">
      <span class="section-title">Server:</span>
      <mat-form-field appearance="fill" class="server-select">
        <mat-label>Server</mat-label>
        <mat-select [(ngModel)]="selectedServer" [compareWith]="compareServers">
          <mat-option *ngFor="let s of servers" [value]="s">{{s.name}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <mat-divider></mat-divider>
    <div *ngIf="selectedServer">
      <div class="section-title">Pods</div>
      <div *ngFor="let pod of selectedServer.pods" class="pod-list">
        <mat-card class="pod-card">
          <div class="pod-info">
            <b>{{pod.pod_id}}</b> ({{pod.status}})<br>
            Owner: {{pod.owner}}<br>
            GPUs: {{pod.requested.gpus}}, RAM: {{pod.requested.ram_gb}} GB, Storage: {{pod.requested.storage_gb}} GB
          </div>
          <button mat-raised-button color="primary" (click)="deletePod(pod)">Delete</button>
        </mat-card>
      </div>
    </div>
    <mat-divider></mat-divider>
    <div class="section-title">Add Pod</div>
    <form class="add-pod-form" (ngSubmit)="createPod()">
      <mat-form-field appearance="fill">
        <mat-label>Pod Name</mat-label>
        <input matInput placeholder="Pod Name" [(ngModel)]="newPod.PodName" name="PodName" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>GPUs</mat-label>
        <input matInput type="number" [(ngModel)]="newPod.Resources.gpus" name="gpus" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>RAM (GB)</mat-label>
        <input matInput type="number" [(ngModel)]="newPod.Resources.ram_gb" name="ram_gb" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Storage (GB)</mat-label>
        <input matInput type="number" [(ngModel)]="newPod.Resources.storage_gb" name="storage_gb" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Image URL</mat-label>
        <input matInput placeholder="Image URL" [(ngModel)]="newPod.image_url" name="image_url" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>K8s Machine IP</mat-label>
        <input matInput placeholder="K8s Machine IP" [(ngModel)]="newPod.machine_ip" name="machine_ip" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>K8s Username</mat-label>
        <input matInput placeholder="K8s Username" [(ngModel)]="newPod.username" name="username" required>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>K8s Password</mat-label>
        <input matInput placeholder="K8s Password" [(ngModel)]="newPod.password" name="password" required type="password">
      </mat-form-field>
      <button mat-raised-button color="accent" type="submit">Create Pod</button>
    </form>
    <div *ngIf="message" class="message">{{message}}</div>
  </mat-card>
</div>