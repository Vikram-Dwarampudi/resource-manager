<div class="dashboard-header">
  <span class="dashboard-title">Resource Manager</span>
  <mat-form-field appearance="outline" class="dashboard-search">
    <mat-label>Search servers, pods...</mat-label>
    <input matInput type="text">
  </mat-form-field>
</div>

<div class="dashboard-summary">
  <mat-card class="summary-card">
    <div class="summary-title">Total Servers</div>
    <div class="summary-value">{{ servers.length }}</div>
    <div class="summary-desc">online</div>
  </mat-card>
  <mat-card class="summary-card">
    <div class="summary-title">Total Pods</div>
    <div class="summary-value">{{ totalPods }}</div>
    <div class="summary-desc">Currently running</div>
  </mat-card>
  <mat-card class="summary-card">
    <div class="summary-title">Allocated CPU</div>
    <div class="summary-value">{{ allocatedCPU }}</div>
    <div class="summary-desc">GPUs allocated</div>
  </mat-card>
  <mat-card class="summary-card">
    <div class="summary-title">Allocated Memory</div>
    <div class="summary-value">{{ allocatedMemory }}</div>
    <div class="summary-desc">GB allocated</div>
  </mat-card>
</div>

<div class="main-content">
  <mat-card class="server-card">
    <div class="server-header">
      <span class="section-title">Server:</span>
      <mat-form-field appearance="fill" class="server-select">
        <mat-label>Server</mat-label>
        <mat-select [(ngModel)]="selectedServer" [compareWith]="compareServers">
          <mat-option *ngFor="let s of servers" [value]="s">{{s.name}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <mat-divider></mat-divider>
    <div class="section-title" style="display: flex; align-items: center; justify-content: space-between;">
      <span>Pods</span>
      <button mat-raised-button color="accent" (click)="openAddPodDialog()">Deploy New Pod</button>
    </div>
    <div *ngIf="selectedServer">
      <div *ngFor="let pod of selectedServer.pods" class="pod-list">
        <mat-card class="pod-card">
          <div class="pod-info">
            <b>{{pod.pod_id}}</b> ({{pod.status}})<br>
            Owner: {{pod.owner}}<br>
            GPUs: {{pod.requested.gpus}}, RAM: {{pod.requested.ram_gb}} GB, Storage: {{pod.requested.storage_gb}} GB
          </div>
          <button mat-raised-button color="primary" (click)="deletePod(pod)">Delete</button>
        </mat-card>
      </div>
    </div>
    <mat-divider></mat-divider>
    <div *ngIf="message" class="message">{{message}}</div>
  </mat-card>
</div>